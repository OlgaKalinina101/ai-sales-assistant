# AI Sales Assistant

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

AI Sales Assistant ‚Äî —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–µ–ª–æ–≤—ã—Ö –ø–∏—Å–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö –∏ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (RAG) –∏ –±–æ–ª—å—à–∏–µ —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ (LLM) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–±–µ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∏—Å–µ–º, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥ —Å–µ–≥–º–µ–Ω—Ç –∫–æ–º–ø–∞–Ω–∏–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∫–ª—é—á–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö ChromaDB, LangGraph –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω–≤–µ–π–µ—Ä–æ–º –∏ FastAPI –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è API.

**–ë–∏–∑–Ω–µ—Å-—Ü–µ–ª—å**: –ü–æ–≤—ã—Å–∏—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç–∫–ª–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∑–∞ —Å—á–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∏—Å–µ–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∫–µ–π—Å–∞—Ö –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
AI_sales_assistant/
‚îÇ
‚îú‚îÄ‚îÄ app/                           # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ routes.py                  # FastAPI –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ letter_pipeline/          # –õ–æ–≥–∏–∫–∞ LangGraph –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ graph.py              # –°–±–æ—Ä–∫–∞ –≥—Ä–∞—Ñ–∞ LangGraph
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nodes.py              # –û—Ç–¥–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai_client.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ OpenAI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prompt_template.txt   # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.py              # –¢–∏–ø—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ retrieval.py              # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ ChromaDB
‚îÇ   ‚îî‚îÄ‚îÄ helpers.py                # –•–µ–ª–ø–µ—Ä –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ json
‚îÇ
‚îú‚îÄ‚îÄ data/                         # –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ raw/                      # –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ processed/                # –†–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ data_ingestion/              # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py               # –ü—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º/–º–æ–¥–µ–ª—è–º
‚îÇ   ‚îú‚îÄ‚îÄ cleaner.py              # –û—á–∏—Å—Ç–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ extractor.py            # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö 
‚îÇ   ‚îú‚îÄ‚îÄ ingestor.py             # –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ –ø–∞–π–ø–ª–∞–π–Ω
‚îÇ   ‚îî‚îÄ‚îÄ loader.py               # –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –ø–∞–º—è—Ç—å
‚îÇ
‚îú‚îÄ‚îÄ utils/                       # –£—Ç–∏–ª–∏—Ç—ã –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ chroma_client.py        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Chroma
‚îÇ   ‚îî‚îÄ‚îÄ logger.py               # –õ–æ–≥–≥–µ—Ä
‚îÇ
‚îú‚îÄ‚îÄ vector_store/               # –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ chroma.sqlite3          # SQLite-—Ñ–∞–π–ª ChromaDB
‚îÇ
‚îú‚îÄ‚îÄ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Dockerfile                  # Dockerfile –¥–ª—è —Å–±–æ—Ä–∫–∏ 
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ requirements.txt            # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ main.py                     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è FastAPI
‚îî‚îÄ‚îÄ README.md                   # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```

## –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

1. **–†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `extract_nested_zip("data/raw/Konsol_Pro_Articles.zip", "data/processed")` –¥–ª—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –∞—Ä—Ö–∏–≤–∞ —Å —É—á–µ—Ç–æ–º —Ç—Ä–µ—Ö —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏.
   - –§–∞–π–ª—ã –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –≤ `snake_case` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Konsol_Pro_Articles.zip`) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ –ø—É—Ç—è—Ö.

2. **–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π**:
```python
   from data_ingestion.ingestor import KnowledgeBaseBuilder
   builder = KnowledgeBaseBuilder()
   builder.ingest()
```
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç `.md` —Ñ–∞–π–ª—ã –∏–∑ `data/processed` –∏ PDF (`data/raw/Service_Console.pdf`).
   - –†–∞–∑–±–∏–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ —á–∞–Ω–∫–∏ (256‚Äì384 —Ç–æ–∫–µ–Ω–∞, –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ 40‚Äì64 —Ç–æ–∫–µ–Ω–∞).
   - –°–æ–∑–¥–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `sentence-transformers/all-MiniLM-L6-v2`.
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–∞–Ω–∫–∏ –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –≤ ChromaDB.

3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∏—Å—å–º–∞**:
   - FastAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç `/generate_email` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥.
   - LangGraph –∫–æ–Ω–≤–µ–π–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∏—Å—å–º–æ —á–µ—Ä–µ–∑ `gpt-4o`.

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### Markdown —Ñ–∞–π–ª—ã
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 15 `.md` —Ñ–∞–π–ª–æ–≤ –≤ –∞—Ä—Ö–∏–≤–µ `Konsol_Pro_Articles.zip`.
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–æ–º–æ—â—å—é llama_index MarkdownReader. –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞: 256‚Äì384 —Ç–æ–∫–µ–Ω–∞, –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ 40‚Äì64 —Ç–æ–∫–µ–Ω–∞. 
- **–ü–æ—á–µ–º—É**:
  - –ö–æ—Ä–æ—Ç–∫–∏–µ –±–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞ (2‚Äì4 –∞–±–∑–∞—Ü–∞) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–º—ã—Å–ª–æ–≤—É—é —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å (–∫–ª–∏–µ–Ω—Ç, –ø—Ä–æ–±–ª–µ–º–∞, —Ä–µ—à–µ–Ω–∏–µ).
  - –°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.
  - –¢–æ—á–Ω—ã–π RAG —Å –ø–æ–¥—Ö–æ–¥–æ–º "one-fact-per-chunk".

### PDF –¥–æ–∫—É–º–µ–Ω—Ç
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `Service_Console.pdf` —Å –ø–æ–º–æ—â—å—é `pdfplumber`.
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º `FontBBox` –≤ —à—Ä–∏—Ñ—Ç–∞—Ö. –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–∞–Ω–∫–æ–≤ –ø–æ–∫–∞–∑–∞–ª–∞, —á—Ç–æ —Ç–µ–∫—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã.
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–ª—è –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ PDF —Å –ø–æ–¥–æ–±–Ω—ã–º–∏ —à—Ä–∏—Ñ—Ç–∞–º–∏ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏–ª–∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É —à—Ä–∏—Ñ—Ç–æ–≤.

### –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ `sentence-transformers/all-MiniLM-L6-v2`.
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
  - –õ–µ–≥–∫–∞—è (~80 –ú–ë), –±—ã—Å—Ç—Ä–∞—è, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU.
  - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–µ–ª–æ–≤—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:
  | –ú–æ–¥–µ–ª—å                        | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞                              | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏                              |
  |------------------------------|-------------------------------------------|-----------------------------------------|
  | multi-qa-mpnet-base-dot-v1   | –¢–æ—á–Ω–µ–µ –¥–ª—è Q&A, –ª—É—á—à–µ –Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö  | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏                |
  | BAAI/bge-small-en            | –•–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏         | –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –Ω–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è            |
  | intfloat/e5-small-v2         | –ù–æ–≤–∞—è, –¥–ª—è open-domain retrieval          | –¢—Ä–µ–±—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ query/passage           |
  | text-embedding-3-small       | –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ                          | –ü–ª–∞—Ç–Ω–∞—è, —Ç—Ä–µ–±—É–µ—Ç API                    |

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
–õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å data_ingestion, –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### KnowledgeBaseBuilder
–ö–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç `.md` –∏ PDF —Ñ–∞–π–ª—ã.
- –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏ (256‚Äì384 —Ç–æ–∫–µ–Ω–∞, –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ 40‚Äì64).
- –°–æ–∑–¥–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (`sentence-transformers/all-MiniLM-L6-v2`).
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ ChromaDB.
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏**:
  - –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ `yield`.
  - –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞–Ω–∫–æ–≤ (–±–∞—Ç—á–∏ –ø–æ 100).
  - –û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏ (`del` –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤).
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å `psutil` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏ –≤ –∫–æ–Ω—Ü–µ.


**–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞**:
```python
from data_ingestion.ingestor import KnowledgeBaseBuilder
builder = KnowledgeBaseBuilder()
builder.ingest()
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
–§—É–Ω–∫—Ü–∏—è `clear_directory` –∏ –æ–±–µ—Ä—Ç–∫–∏ `clear_raw_data`, `clear_processed_data`:
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç `os.scandir` –¥–ª—è –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –ø–∞–º—è—Ç—å.
- –õ–æ–≥–∏—Ä—É—é—Ç —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫.
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ try-except.

**–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞**:
```python
from data_ingestion.cleaner import clear_processed_data
clear_processed_data()
```

### –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (RAG)
–§—É–Ω–∫—Ü–∏—è `find_relevant_chunks_by_segment`:
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ —á–∞–Ω–∫–æ–≤ –≤ ChromaDB –ø–æ —Å–µ–≥–º–µ–Ω—Ç—É.
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏**:
  - –í–∞–ª–∏–¥–∞—Ü–∏—è `segment` –∏ `top_k`.
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `SentenceTransformer`.
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
  - –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã –∏–ª–∏ fuzzy-–ø–æ–∏—Å–∫ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤.
  - –•—Ä–∞–Ω–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞**:
```python
from app.retrieval import find_relevant_chunks_by_segment
chunks = find_relevant_chunks_by_segment("–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ", collection, embedder)
```

### LangGraph –ø–∞–π–ø–ª–∞–π–Ω

–ü–∞–π–ø–ª–∞–π–Ω –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º LangGraph: –≥—Ä–∞—Ñ –≤–∫–ª—é—á–∞–µ—Ç –Ω–æ–¥—ã input, search, prompt, generate, output, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–∑–æ–ª–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É SRP.

–ö–æ–Ω–≤–µ–π–µ—Ä –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∏—Å—å–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —É–∑–ª–æ–≤:
| –£–∑–µ–ª            | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                              |
|-----------------|-----------------------------------------|
| `input`         | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `user_input`                  |
| `search`        | –ò—â–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ –ø–æ —Å–µ–≥–º–µ–Ω—Ç—É      |
| `prompt`        | –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM                |
| `generate`      | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∏—Å—å–º–æ —á–µ—Ä–µ–∑ `gpt-4o`        |
| `output`        | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–µ –ø–∏—Å—å–º–æ              |

- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏**:
  - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (`SentenceTransformer`, ChromaDB, `AsyncOpenAI`).
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ.
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å `psutil` –≤ `search` –∏ `generate`.

### FastAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç
–≠–Ω–¥–ø–æ–∏–Ω—Ç `/generate_email` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSON:
```json
{
  "user_input": {
    "–∫–æ–Ω—Ç–∞–∫—Ç": "–ú–æ–∑—è–∫–∏–Ω –ù–∏–∫–∏—Ç–∞",
    "–¥–æ–ª–∂–Ω–æ—Å—Ç—å": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–∏—Ä–µ–∫—Ç–æ—Ä",
    "–Ω–∞–∑–≤–∞–Ω–∏–µ_–∫–æ–º–ø–∞–Ω–∏–∏": "FIVE",
    "—Å–µ–≥–º–µ–Ω—Ç": "–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ"
  }
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```json
{
  "subject": "–ü–æ–≤—ã—à–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–º–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ –ö–æ–Ω—Å–æ–ª—å",
  "letter": "–£–≤–∞–∂–∞–µ–º—ã–π –ù–∏–∫–∏—Ç–∞,\n\n–ú–µ–Ω—è –∑–æ–≤—É—Ç [–í–∞—à–µ –ò–º—è], —è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ö–æ–Ω—Å–æ–ª—å ‚Äî –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ –≤ —Å—Ñ–µ—Ä–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞.\n\n–ú—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–º –∞–≥–µ–Ω—Ç—Å—Ç–≤–µ —ç—Ñ—Ñ–µ
–∫—Ç–∏–≤–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç —Å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º–∏ –∏ –±–ª–æ–≥–µ—Ä–∞–º–∏ –∏–≥—Ä–∞—é—Ç –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å. –ù–∞ –ø—Ä–∏–º–µ—Ä–µ –Ω–∞—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ MEDIAR, –∫–æ—Ç–æ—Ä—ã–µ —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –ö–æ–Ω—Å–æ–ª—å —Å –±–æ–ª–µ–µ —á–µ–º 250 —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º–∏ –±–ª–æ–≥–µ—Ä–∞–º–∏, –º—ã –≤–∏–¥–∏–º, –∫–∞–∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑
–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∏ —É—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã.\n\n–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∫–æ–º–ø–∞–Ω–∏—è WONDER LAB —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å–º–æ–≥–ª–∞ –ø—Ä–∏–≤–ª–µ—á—å –±–æ–ª–µ–µ —Ç—ã—Å—è—á–∏ –±–ª–æ–≥–µ—Ä–æ–≤, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–≤ —Å–≤–æ–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–≤—à–∏—Å—å –Ω–∞ –≤–∞–∂–Ω–µ–π—à–∏—Ö –∞—Å–ø–µ–∫—Ç–∞—Ö –±–∏–∑–Ω–µ—Å–∞.\n\n–ú—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –ö–æ–Ω—Å–æ–ª—å –º–æ
–∂–µ—Ç —Å—Ç–∞—Ç—å –¥–ª—è FIVE –Ω–∞–¥–µ–∂–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–º –ø–æ–≤—ã—Å–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –±—é—Ä–æ–∫—Ä–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.\n\n–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤–∞–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –∏ –æ—Ü–µ–Ω–∏—Ç—å –≤—Å–µ –µ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –ú—ã –±—É–¥–µ–º —Ä–∞–¥—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É –∏–ª–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ö–æ–Ω—Å–æ–ª–∏ –≤ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –¥–ª—è –≤–∞—Å –≤—Ä–µ–º—è.\n\n–° —É–≤–∞–∂–µ–Ω–∏–µ–º,\n[–í–∞—à–µ –ò–º—è]\n[–í–∞—à–∞ –î–æ–ª–∂–Ω–æ—Å—Ç—å]\n–ö–æ–Ω—Å–æ–ª—å"
}
```

- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏**:
  - Pydantic —Å `max_length` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
  - –û–±—Ä–µ–∑–∫–∞ –ª–æ–≥–æ–≤ –¥–æ 500‚Äì1000 —Å–∏–º–≤–æ–ª–æ–≤.
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å `psutil`.
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: 
  - –í–æ–∑–≤—Ä–∞—Ç `HTTPException` –ø—Ä–∏ —Å–±–æ—è—Ö.
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ json –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –º–æ–¥–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç json —Å –æ–±–µ—Ä—Ç–∫–æ–π. 

## üß† –ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥
–î–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–±—Ä–∞–Ω–∞ –º–æ–¥–µ–ª—å `gpt-4o` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏: 
```
        response = await openai_client.chat.completions.create(
            model="gpt-4o",
            messages=[
                {
                    "role": "system",
                    "content": "–¢—ã ‚Äî AI-–ø–æ–º–æ—â–Ω–∏–∫, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â–∏–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤.",
                },
                {"role": "user", "content": state["prompt"]},
            ],
            temperature=0.7,
        )
```
temperature=0.7 –≤—ã–±—Ä–∞–Ω–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–≥–æ, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∏—Å—å–º–∞.

–ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–≤–æ–¥:
–ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è (–∫–æ–Ω—Ç–∞–∫—Ç, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, –Ω–∞–∑–≤–∞–Ω–∏–µ_–∫–æ–º–ø–∞–Ω–∏–∏, —Å–µ–≥–º–µ–Ω—Ç) –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ CRM-–¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é –∏ —Å–Ω–∏–∂–∞–µ—Ç —à—É–º –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

–ò–Ω–∂–µ–∫—Ü–∏—è –∑–Ω–∞–Ω–∏–π:
–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫) –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –º–æ–¥–µ–ª—å –º–æ–≥–ª–∞ —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã.

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ prompt'e:
–í–º–µ—Å—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –ø–æ—à–∞–≥–æ–≤–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞:

- –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ç –∏–º–µ–Ω–∏ –∫–æ–º–ø–∞–Ω–∏–∏,
- –≤—ã–≥–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è,
- —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ—Ö–æ–∂–∏–µ –∫–µ–π—Å—ã,
- –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é ‚Äî –≤—Å—ë —á–µ—Ä–µ–∑ bullet-–ø—É–Ω–∫—Ç—ã.
- 
–≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π –∏ —É–ª—É—á—à–∞–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∏—Å—å–º–∞.

–§–æ–∫—É—Å –Ω–∞ –¥–µ–ª–æ–≤–æ–º B2B-—Ç–æ–Ω–µ:
–ó–∞–¥–∞–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –ø–∏—Å—å–º–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ¬´–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ —É–±–µ–¥–∏—Ç–µ–ª—å–Ω—ã–º, –Ω–æ –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤—ã–º¬ª, —á—Ç–æ–±—ã –Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å –æ—Ç—Ç–æ—Ä–∂–µ–Ω–∏–µ —É —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.

–Ø–≤–Ω–∞—è JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –æ—Ç–≤–µ—Ç–µ:
–ú–æ–¥–µ–ª—å –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—é —Å—Ç—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ JSON, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ subject –∏ body. –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∏.

–ü–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞ —Å—á—ë—Ç —á—ë—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ –∏ —É–∫–∞–∑–∞–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –≤—ã–≤–æ–¥–∞.
‚úÖ –°–∏–ª—å–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —è–≤–Ω—ã–µ –ø–æ–ª—è ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∏–º–∏—Ç–∞—Ü–∏—è CRM-–ø–æ–ª—è.
‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø–∏—Å—å–º–∞ —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
‚úÖ –ü–æ–≤—ã—à–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∑–∞ —Å—á—ë—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π —Ç–µ–º—ã –ø–∏—Å—å–º–∞ (subject), —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö –∞–¥—Ä–µ—Å–∞—Ç–∞.
‚úÖ –ì–∏–±–∫–æ—Å—Ç—å: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω –≤ —Ä–∞–∑–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–¥–æ–º–µ–Ω–∞—Ö, –º–µ–Ω—è—è —Ç–æ–ª—å–∫–æ –ø–æ–ª—è –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç.

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`:
   ```plaintext
   OPENAI_API_KEY=sk-...
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   uvicorn main:app --reload
   ```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
1. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   docker-compose up --build
   ```
2. –î–æ—Å—Ç—É–ø –∫ API: `http://localhost:8000/generate_email`.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- **–£–ª—É—á—à–µ–Ω–∏–µ RAG**:
  - –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã –∏–ª–∏ fuzzy-–ø–æ–∏—Å–∫ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤.
  - –•—Ä–∞–Ω–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ PDF**:
  - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É —à—Ä–∏—Ñ—Ç–æ–≤ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π `FontBBox`.
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**:
  - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ —á–∞–Ω–∫–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤:
    ```python
    from functools import lru_cache
    @lru_cache(maxsize=100)
    def cached_search(segment: str) -> tuple:
        return tuple(find_relevant_chunks_by_segment(segment, collection, embedder))
    ```
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
  - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å `TestClient` –¥–ª—è `/generate_email`.
- **Guardialis**:
  - –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –º–æ–¥–µ–ª–∏ —Å –ø–æ–º–æ—â—å—é Guardrails –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏, —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã –æ—Ç–≤–µ—Ç–∞.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
  - –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é API (–Ω–∞–ø—Ä–∏–º–µ—Ä, JWT –∏–ª–∏ API-–∫–ª—é—á).
